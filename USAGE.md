# A股两融交易查询系统 - 快速使用指南

## 🚀 快速开始

### 1. 环境准备
```bash
# 确保Python 3.8+已安装
python3 --version

# 进入项目目录
cd 两融交易查询

# 安装依赖（如果还没有安装）
pip3 install -r requirements.txt
```

### 2. 启动方式

#### 方式一：使用启动脚本（推荐）
```bash
python3 run.py
```
然后按照菜单提示选择：
- 选择 `1` - Web界面（推荐新用户）
- 选择 `2` - 命令行界面
- 选择 `3` - 安装/更新依赖

#### 方式二：直接启动Web界面
```bash
streamlit run app.py
```
浏览器将自动打开 `http://localhost:8501`

#### 方式三：命令行界面
```bash
# 交互式模式
python3 main.py --interactive

# 直接查询（查询最近30天）
python3 main.py

# 指定日期范围查询
python3 main.py --start 20240101 --end 20240131 --dashboard
```

## 📊 Web界面使用流程

1. **启动程序** → 运行 `streamlit run app.py`
2. **设置参数** → 在左侧边栏选择日期范围
3. **开始查询** → 点击"开始查询"按钮
4. **查看结果** → 浏览数据概览、图表和详细数据
5. **导出数据** → 在数据表格部分下载CSV文件

## 🔧 功能说明

### 主要功能
- **数据查询**: 获取指定时间范围的两融交易数据
- **趋势分析**: 计算变化率、移动平均等技术指标
- **占比计算**: 分析融资融券在市场中的占比
- **图表生成**: 生成多种专业分析图表
- **报告导出**: 生成详细的文字分析报告

### 数据来源
- **AKShare**: 免费开源金融数据接口（主要）
- **TuShare**: 专业金融数据接口（需要Token）
- **东方财富**: 实时行情数据接口

### 输出文件
程序会在 `output` 目录生成：
- 数据文件：CSV/Excel/JSON格式
- 分析报告：TXT格式的详细报告
- 图表文件：PNG格式的分析图表
- 交互式仪表板：HTML格式的交互图表

## ⚠️ 注意事项

### 使用建议
1. **首次使用**: 建议先安装所有依赖包
2. **查询范围**: 建议单次查询不超过1年数据
3. **网络要求**: 需要稳定的网络连接获取数据
4. **存储空间**: 确保有足够的磁盘空间存储结果

### 常见问题

**问题1: 依赖包安装失败**
```bash
# 解决方案：使用国内镜像源
pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

**问题2: 数据获取失败**
- 检查网络连接
- 稍后重试（可能是数据源临时不可用）
- 尝试不同的日期范围

**问题3: 图表显示中文乱码**
- 系统已配置中文字体支持
- 如仍有问题，请确保系统安装了中文字体

**问题4: Web界面无法访问**
```bash
# 确保Streamlit正确安装
pip3 install streamlit

# 手动指定端口
streamlit run app.py --server.port 8501
```

## 📈 使用示例

### 示例1: 查询最近一个月数据
```bash
python3 main.py --start 20241201 --end 20241231 --format excel --dashboard
```

### 示例2: 仅生成数据文件
```bash
python3 main.py --start 20241101 --end 20241130 --no-charts
```

### 示例3: Web界面快速查询
1. 启动：`streamlit run app.py`
2. 设置日期范围：2024-12-01 到 2024-12-31
3. 点击"开始查询"
4. 查看结果并下载数据

## 🆘 技术支持

如果遇到问题：

1. **检查依赖**: 运行 `python3 test_basic_functionality.py`
2. **查看日志**: 检查 `logs` 目录中的日志文件
3. **重新安装**: 删除虚拟环境重新安装依赖
4. **联系支持**: 创建Issue描述问题

## 📝 版本信息

- **当前版本**: v1.0.0
- **Python要求**: 3.8+
- **主要依赖**: pandas, numpy, matplotlib, streamlit, akshare
- **最后更新**: 2024-01-01

---

**免责声明**: 本工具仅用于数据分析和学习目的，不构成投资建议。投资有风险，决策需谨慎。